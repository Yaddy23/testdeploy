"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[364],{7370:function(e,n,t){t.d(n,{Z:function(){return w}});t(2791);var r=t(1413),a=t(9439),s=t(1087),c=t(9805),l=t(8241),o=t(3402),i=t(183),d=t(4165),u=t(5861),h=t(5102),m=t(1243),v=t(7689),x=t(184),p=function(){var e=(0,h.R)(),n=(0,a.Z)(e,2),t=n[0],s=n[1],c=(0,v.s0)(),l=function(){var e=(0,u.Z)((0,d.Z)().mark((function e(n){var a,l;return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,m.Z.get("/api/v1/product/search/".concat(t.keyword));case 4:a=e.sent,l=a.data,s((0,r.Z)((0,r.Z)({},t),{},{results:l})),c("/search"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(n){return e.apply(this,arguments)}}();return(0,x.jsx)("div",{children:(0,x.jsxs)("form",{className:"d-flex",role:"search",onSubmit:l,children:[(0,x.jsx)("input",{className:"form-control me-2",type:"search",placeholder:"Search","aria-label":"Search",value:t.keyword,onChange:function(e){return s((0,r.Z)((0,r.Z)({},t),{},{keyword:e.target.value}))}}),(0,x.jsx)("button",{className:"btn btn-outline-success",type:"submit",children:"Search"})]})})},j=t(4904),g=t(6224),f=t(574),b=function(){var e,n,t=(0,g.j)(),d=(0,a.Z)(t,1)[0],u=(0,l.a)(),h=(0,a.Z)(u,2),m=h[0],v=h[1],b=(0,j.Z)();return(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light",children:[(0,x.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarTogglerDemo01","aria-controls":"navbarTogglerDemo01","aria-expanded":"false","aria-label":"Toggle navigation",children:(0,x.jsx)("span",{className:"navbar-toggler-icon"})}),(0,x.jsxs)("div",{className:"collapse navbar-collapse",id:"navbarTogglerDemo01",children:[(0,x.jsxs)(s.rU,{to:"/",className:"navbar-brand",children:[(0,x.jsx)("img",{src:i,width:100,height:60,alt:"broken"}),"New Century Books"]}),(0,x.jsxs)("ul",{className:"navbar-nav ms-auto mt-2 mt-lg-0 p-3",children:[(0,x.jsx)(p,{}),(0,x.jsx)("li",{className:"nav-item",children:(0,x.jsx)(s.OL,{to:"/",className:"nav-link",children:"Home"})}),(0,x.jsxs)("li",{className:"nav-item dropdown",children:[(0,x.jsx)(s.rU,{className:"nav-link dropdown-toggle",to:"/categories","data-bs-toggle":"dropdown",children:"Categories"}),(0,x.jsxs)("ul",{className:"dropdown-menu",children:[(0,x.jsx)("li",{children:(0,x.jsx)(s.rU,{className:"dropdown-item",to:"/categories",children:"All Categories"})}),null===b||void 0===b?void 0:b.map((function(e){return(0,x.jsx)("li",{children:(0,x.jsx)(s.rU,{className:"dropdown-item",to:"/category/".concat(e.slug),children:e.name})})}))]})]}),(0,x.jsx)("li",{className:"nav-item",children:(0,x.jsx)(s.OL,{to:"/Shop",className:"nav-link",children:"Shop"})}),m.user?(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)("li",{className:"nav-item dropdown",children:[(0,x.jsx)(s.OL,{className:"nav-link dropdown-toggle",href:"#",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false",children:null===m||void 0===m||null===(e=m.user)||void 0===e?void 0:e.firstName}),(0,x.jsxs)("ul",{className:"dropdown-menu dropdown-menu-end",children:[(0,x.jsx)("li",{children:(0,x.jsx)(s.OL,{to:"/dashboard/".concat(1===(null===m||void 0===m||null===(n=m.user)||void 0===n?void 0:n.role)?"admin":"user"),className:"dropdown-item",children:"Dashboard"})}),(0,x.jsx)("li",{children:(0,x.jsx)(s.OL,{onClick:function(){v((0,r.Z)((0,r.Z)({},m),{},{user:null,token:""})),localStorage.removeItem("auth"),o.ZP.success("Logout Successfully")},to:"/login",className:"dropdown-item",children:"Logout"})})]})]})}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("li",{className:"nav-item",children:(0,x.jsx)(s.OL,{to:"/register",className:"nav-link",children:"Sign Up"})}),(0,x.jsx)("li",{className:"nav-item",children:(0,x.jsx)(s.OL,{to:"/login",className:"nav-link",children:"Sign In"})})]}),(0,x.jsx)("li",{className:"nav-item",children:(0,x.jsx)(f.Z,{count:null===d||void 0===d?void 0:d.length,showZero:!0,children:(0,x.jsx)(s.OL,{to:"/cart",className:"nav-link",children:(0,x.jsx)(c.FeP,{})})})})]})]})]})})},N=function(){return(0,x.jsxs)("div",{className:"footer",children:[(0,x.jsxs)("h4",{className:"text-center",children:["All Rights Reserved \xa9 New Century Books"," "]}),(0,x.jsxs)("p",{className:"text-center mt-3",children:[(0,x.jsx)(s.rU,{to:"/about",children:"About"}),"|",(0,x.jsx)(s.rU,{to:"/contact",children:"Contact"})]})]})},k=t(4270),y=(t(5462),function(e){var n=e.children,t=e.title,r=e.description,a=e.keywords,s=e.author;return(0,x.jsxs)("div",{children:[(0,x.jsxs)(k.q,{children:[(0,x.jsx)("meta",{charSet:"utf-8"}),(0,x.jsx)("meta",{name:"description",content:r}),(0,x.jsx)("meta",{name:"keywords",content:a}),(0,x.jsx)("meta",{name:"author",content:s}),(0,x.jsx)("title",{children:t})]}),(0,x.jsx)(b,{}),(0,x.jsxs)("main",{style:{minHeight:"90vh"},children:[(0,x.jsx)(o.x7,{}),n]}),(0,x.jsx)(N,{})]})});y.defaultProps={title:"New Century Books",description:"ecommerce shop",keywords:"mern,react,node,mngodb",author:"Yad"};var w=y},4904:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(4165),a=t(5861),s=t(9439),c=t(2791),l=t(1243);function o(){var e=(0,c.useState)([]),n=(0,s.Z)(e,2),t=n[0],o=n[1],i=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var n,t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.Z.get("/api/v1/category/get-category");case 3:n=e.sent,t=n.data,o(null===t||void 0===t?void 0:t.category),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return(0,c.useEffect)((function(){i()}),[]),t}},9364:function(e,n,t){t.r(n);var r=t(4165),a=t(5861),s=t(3433),c=t(9439),l=t(2791),o=t(7370),i=t(6224),d=t(8241),u=t(7689),h=t(1046),m=t(1243),v=t(3402),x=t(184);n.default=function(){var e,n,t,p,j=(0,d.a)(),g=(0,c.Z)(j,2),f=g[0],b=(g[1],(0,i.j)()),N=(0,c.Z)(b,2),k=N[0],y=N[1],w=(0,l.useState)(""),Z=(0,c.Z)(w,2),S=Z[0],C=Z[1],L=(0,l.useState)(""),P=(0,c.Z)(L,2),U=P[0],O=P[1],I=(0,l.useState)(!1),T=(0,c.Z)(I,2),q=T[0],A=T[1],D=(0,u.s0)(),F=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var n,t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.Z.get("/api/v1/product/braintree/token");case 3:n=e.sent,t=n.data,C(null===t||void 0===t?void 0:t.clientToken),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){F()}),[null===f||void 0===f?void 0:f.token]);var _=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var n,t,a,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,A(!0),e.next=4,U.requestPaymentMethod();case 4:return n=e.sent,t=n.nonce,a=k.map((function(e){return{product:e._id,quantity:e.quantity,price:e.price}})),e.next=9,m.Z.post("/api/v1/product/braintree/payment",{nonce:t,cart:a});case 9:s=e.sent,s.data,A(!1),localStorage.removeItem("cart"),y([]),D("/dashboard/user/orders"),v.ZP.success("Payment Completed Successfully "),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(0),console.log(e.t0),A(!1);case 22:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(){return e.apply(this,arguments)}}();return(0,x.jsx)(o.Z,{children:(0,x.jsxs)("div",{className:"container",children:[(0,x.jsx)("div",{className:"row",children:(0,x.jsxs)("div",{className:"col-md-12",children:[(0,x.jsx)("h1",{className:"text-center bg-light p-2 mb-1",children:"Hello ".concat((null===f||void 0===f?void 0:f.token)&&(null===f||void 0===f||null===(e=f.user)||void 0===e?void 0:e.firstName))}),(0,x.jsx)("h4",{className:"text-center",children:null!==k&&void 0!==k&&k.length?"You Have ".concat(k.length," item\\'s in your cart ").concat(null!==f&&void 0!==f&&f.token?"":"please login to checkout"):" Your Cart Is Empty"})]})}),(0,x.jsxs)("div",{className:"row",children:[(0,x.jsx)("div",{className:"col-md-8",children:null===k||void 0===k?void 0:k.map((function(e){return(0,x.jsxs)("div",{className:"row mb-2 p-3 card flex-row",children:[(0,x.jsx)("div",{className:"col-md-4",children:(0,x.jsx)("img",{src:"/api/v1/product/product-photo/".concat(e._id),className:"card-img-top",alt:e.name,width:"100px",height:"160px"})}),(0,x.jsxs)("div",{className:"col-md-8",children:[(0,x.jsx)("p",{children:e.name}),(0,x.jsx)("p",{children:e.description.substring(0,30)}),(0,x.jsxs)("p",{children:["Price : ",e.price]}),(0,x.jsxs)("p",{children:["Quantity: ",e.quantity]}),(0,x.jsx)("button",{className:"btn btn-danger",onClick:function(){return function(e){try{var n=(0,s.Z)(k),t=n.findIndex((function(n){return n._id===e}));n.splice(t,1),y(n),localStorage.setItem("cart",JSON.stringify(n))}catch(r){console.log(r)}}(e._id)},children:"Remove"})]})]},e._id)}))}),(0,x.jsxs)("div",{className:"col-md-4 text-center",children:[(0,x.jsx)("h2",{children:"Cart Summary"}),(0,x.jsx)("p",{children:"Total | Checkout | Payment"}),(0,x.jsx)("hr",{}),(0,x.jsxs)("h4",{children:["Total : ",function(){try{var e=0;return null===k||void 0===k||k.map((function(n){e+=n.price*n.quantity})),e.toLocaleString("en-US",{style:"currency",currency:"USD"})}catch(n){console.log(n)}}()," "]}),null!==f&&void 0!==f&&null!==(n=f.user)&&void 0!==n&&n.address?(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)("div",{className:"mb-3",children:[(0,x.jsx)("h4",{children:"Current Address: "}),(0,x.jsx)("h5",{children:null===f||void 0===f||null===(t=f.user)||void 0===t?void 0:t.address}),(0,x.jsx)("button",{className:"btn btn-outline-warning",onClick:function(){return D("/dashboard/user/profile")},children:"Update Address"})]})}):(0,x.jsx)("div",{className:"mb-3",children:null!==f&&void 0!==f&&f.token?(0,x.jsx)("button",{className:"btn btn-outline-warning",onClick:function(){return D("/dashboard/user/profile")},children:"Update Address"}):(0,x.jsx)("button",{className:"btn btn-outline-warning",onClick:function(){return D("/login",{state:"/cart"})},children:"Plase Login to checkout"})}),(0,x.jsx)("div",{className:"mb-3",children:S&&null!==k&&void 0!==k&&k.length?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(h.Z,{options:{authorization:S},onInstance:function(e){return O(e)}}),(0,x.jsx)("button",{className:"btn btn-primary",onClick:_,disabled:q||!U||!(null!==f&&void 0!==f&&null!==(p=f.user)&&void 0!==p&&p.address),children:q?"Processing ....":"Make Payment"})]}):""})]})]})]})})}},183:function(e,n,t){e.exports=t.p+"static/media/ncblogo.224df00ba05c159aadbd.png"}}]);
//# sourceMappingURL=364.dacb828c.chunk.js.map